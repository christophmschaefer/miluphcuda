<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>
	<meta name="generator" content="Doxygen 1.8.13"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Miluphcuda: Impact example for miluphcuda</title>
	<link href="tabs.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
	<link href="doxygen-custom.css" rel="stylesheet" type="text/css" />
	<!-- Add icon library -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Add font awesome icons -->
</head>
<body>
	<div id="banner">
		<div class="logo">
			<span class="subtitle">
				API Documentation for miluphcuda <!-- Impact example for miluphcuda -->
			</span>
			<!-- <span class="search">
				<input type="text" placeholder="Search" onkeydown="search(this,event);">
			</span> -->
		</div>
	<div class="icon-bar">
		<a href="https://cpt-milkyway.am10.uni-tuebingen.de/stoffel/miluphcuda/tree/master" class="fa fa-gitlab"></a>
		<a href="https://www.tat.physik.uni-tuebingen.de/~schaefer/#codes" class="fa fa-university"></a>
		<a href="https://github.com/christophmschaefer/miluphcuda" class="fa fa-github"></a>
		<a href="https://en.wikipedia.org/wiki/Smoothed-particle_hydrodynamics" class="fa fa-wikipedia-w"></a>
	</div>
	</div>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Impact example for miluphcuda </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Christoph Burger <a href="#" onclick="location.href='mai'+'lto:'+'chr'+'is'+'top'+'h.'+'bur'+'ge'+'r@u'+'ni'+'-tu'+'eb'+'ing'+'en'+'.de'; return false;">chris<span style="display: none;">.nosp@m.</span>toph<span style="display: none;">.nosp@m.</span>.burg<span style="display: none;">.nosp@m.</span>er@u<span style="display: none;">.nosp@m.</span>ni-tu<span style="display: none;">.nosp@m.</span>ebin<span style="display: none;">.nosp@m.</span>gen.d<span style="display: none;">.nosp@m.</span>e</a></p>
<p>last updated: 04/May/2021 </p><hr/>
<p>This example represent an impact scenario of a basalt projectile onto a basalt, half-sphere target.</p>
<p>The spherical projectile has a radius of 0.5m, impacts with 6km/s, at an impact angle (to the vertical) of 30 deg.</p>
<p>All material is modeled as a porous solid, with a porosity of 20% (i.e., an initial distention of 1.25).</p>
<p>Applied rheology models:</p>
<ul>
<li>p-alpha porosity model</li>
<li>Collins model for plastic flow</li>
<li>Grady-Kipp model for fragmentation</li>
<li>Tillotson equation of state</li>
</ul>
<p>A zero-gravity environment is assumed.</p>
<p>The scenario uses ~60k SPH particles, with a runtime on the order of several hours on most current GPUs (benchmarked on a GTX 970). </p><hr/>
<p><b>To run the example:</b></p>
<ol type="1">
<li>Compile miluphcuda using the <code>parameter.h</code> file from this directory. Don't forget to also adapt the miluphcuda Makefile to your system.</li>
<li>Unpack <code>impact.0000.gz</code>.</li>
<li>Adapt the start script <code>run.sh</code> to your system (path to CUDA libs and to miluphcuda executable) and execute it.</li>
<li>Wait for the simulation to finish (200 output files). Output to stdout and stderr is written to <code>miluphcuda.output</code> and <code>miluphcuda.error</code>, respectively. <hr/>
</li>
</ol>
<p><b>Check/visualize the results</b></p>
<ul>
<li><p class="startli">You can visualize the simulation for example with <em>Paraview</em>. Find the latest release at <a href="https://www.paraview.org/">https://www.paraview.org/</a>.</p>
<p class="startli">First, enter the simulation directory and run </p><pre class="fragment">  utils/postprocessing/create_xdmf.py
</pre><p class="startli">which creates an xdmf file (<em>paraview.xdmf</em> by default). You can use the default cmd-line options, so no need to set anything explicitly. Then start Paraview and either</p><ul>
<li>directly open the created paraview.xdmf and choose settings yourself</li>
<li>load the prepared Paraview state in <em>paraview.pvsm</em> (<em><a class="el" href="struct_file.html">File</a> -&gt; Load State</em>), and select the created <code>paraview.xdmf</code> file under <em>Choose <a class="el" href="struct_file.html">File</a> Names</em> (note that this shows you a slice of the target by default, for better visibility of the cratering process)</li>
</ul>
</li>
<li>Compare your results (e.g., visualized with Paraview) to the animations in the <code>results/</code> directory, which show the cratering process (a sclice of the target) for various quantities.</li>
<li>A full view of the (half-sphere) target and the impact process is visualized in <em>full.mp4</em>.</li>
<li><p class="startli">An important aspect of the porosity model is that the <em>crush curve</em> (the curve distention vs. pressure which is followed during compaction) is modeled correctly. Since the pressures that lead to compaction are typically released again quickly, the SPH particles will eventually lie either on or below the crush curve &ndash; if the model is accurate. You can check this by running for example </p><pre class="fragment">  results/plot_p_alpha_convergence.py -v --files impact.000[1-4].h5
</pre><p class="startli">which plots SPH particles + the theoretical crush curve for output frames 1 through 4. Take a look at <em>results/p_vs_alpha.first4frames.png</em> to see what the plots should qualitatively look like for the above four frames. You can of course specify any number/sequence of frames you are interested in for plotting. </p><hr/>
</li>
</ul>
<p><b>Where to go from here?</b></p>
<p>You can easily build on this example for setting up your own simulations. It is straight-forward to run different scenarios, with varying impactor masses, impact parameters, and even material compositions and parameters.</p>
<p>We use an external tool for creating the required initial conditions, which is easy to use. Just drop me an e-mail if you are interested.</p>
<p>Take a look at the timestep statistics at the very bottom of <em>miluphcuda.output</em>. If you are not satisfied you may try to adjust the integrator accuracy on the cmd-line and/or the compile-time settings for the integrator in <em><a class="el" href="rk2adaptive_8h.html">rk2adaptive.h</a></em>.</p>
<p>Enjoy! </p>
</div></div><!-- contents -->
<!-- start footer part -->
  <hr class="footer"/><address class="footer"><small>
    Miluphcuda  - Impact example for miluphcuda<br />
    Generated on Tue May 11 2021 07:05:13 by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.13
  </small></address>
</body>
</html>