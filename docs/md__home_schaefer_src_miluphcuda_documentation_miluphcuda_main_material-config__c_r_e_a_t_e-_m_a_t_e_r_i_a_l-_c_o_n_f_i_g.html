<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>
	<meta name="generator" content="Doxygen 1.8.13"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Miluphcuda: How to set up the material config file for miluphcuda</title>
	<link href="tabs.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
	<link href="doxygen-custom.css" rel="stylesheet" type="text/css" />
	<!-- Add icon library -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Add font awesome icons -->
</head>
<body>
	<div id="banner">
		<div class="logo">
			<span class="subtitle">
				API Documentation for miluphcuda <!-- How to set up the material config file for miluphcuda -->
			</span>
			<!-- <span class="search">
				<input type="text" placeholder="Search" onkeydown="search(this,event);">
			</span> -->
		</div>
	<div class="icon-bar">
		<a href="https://cpt-milkyway.am10.uni-tuebingen.de/stoffel/miluphcuda/tree/master" class="fa fa-gitlab"></a>
		<a href="https://www.tat.physik.uni-tuebingen.de/~schaefer/#codes" class="fa fa-university"></a>
		<a href="https://github.com/christophmschaefer/miluphcuda" class="fa fa-github"></a>
		<a href="https://en.wikipedia.org/wiki/Smoothed-particle_hydrodynamics" class="fa fa-wikipedia-w"></a>
	</div>
	</div>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to set up the material config file for miluphcuda </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>last updated: 21/Feb/2021</p>
<p>Christoph Burger, Christoph Sch√§fer <a href="#" onclick="location.href='mai'+'lto:'+'chr'+'is'+'top'+'h.'+'bur'+'ge'+'r@u'+'ni'+'-tu'+'eb'+'ing'+'en'+'.de'; return false;">chris<span style="display: none;">.nosp@m.</span>toph<span style="display: none;">.nosp@m.</span>.burg<span style="display: none;">.nosp@m.</span>er@u<span style="display: none;">.nosp@m.</span>ni-tu<span style="display: none;">.nosp@m.</span>ebin<span style="display: none;">.nosp@m.</span>gen.d<span style="display: none;">.nosp@m.</span>e</a> </p><hr/>
<h2>Purpose </h2>
<p>miluphcuda supports multiple materials, and multiple rheologies. Many important settings for the material model, especially material parameters, are parsed in a structured config file, typically named <em>material.cfg</em>. In addition to material parameters, some numerical settings (e.g., for the smoothing length) are also configured via that file.</p>
<p>The config file is processed by the <em>libconfig</em> library. Check <a href="http://hyperrealm.github.io/libconfig/">http://hyperrealm.github.io/libconfig/</a> for the latest version and documentation.</p>
<p><b>Note</b>: This file is one of three places where you configure miluphcuda settings. The other two are:</p>
<ul>
<li><em>parameter.h</em> (at compile time)</li>
<li><em>cmd-line flags</em></li>
</ul>
<p>The config file is passed to miluphcuda by the <code>-m</code> cmd-line option. </p><hr/>
<h2><a class="el" href="struct_file.html">File</a> structure </h2>
<p>The config file consists of key-value pairs, organized in groups for different materials, equation of state, etc. Groups are blocks enclosed in <code>{...}</code>.</p>
<p>The basic file structure, containing <em>n</em> different materials, looks like: </p><pre class="fragment">    materials =
    (
        {
            ID = 0
            name = ...
            ...

            eos = {
                type = ...
                ...
                ...
            }
        },
        {
            ID = 1
            name = ...
            ...

            eos = {
                type = ...
                ...
                ...
            }
        },
        .
        .
        .
        {
            ID = n-1
            name = ...
            ...

            eos = {
                type = ...
                ...
                ...
            }
        }
    );
</pre><p>The available/required settings depend on the used material model(s), and are listed and described below.</p>
<p>Config files can be conveniently assembled by including external content using: </p><pre class="fragment">    @include "&lt;file&gt;"
</pre><p>Include directives can also be nested.</p>
<p>The <code>material.cfg</code> file in this directory contains an example setup, comprising several materials and material models.</p>
<p>Note that, for now, the <code>eos = {...}</code> group regularly contains not only equation-of-state-specific entries, but also further parameters related to the material model. </p><hr/>
<h2>Where to find material parameters? </h2>
<ul>
<li>The <code>material_data/</code> directory contains parameters for various materials.</li>
<li>You can also check the <code>test_cases/</code> and <code>examples/</code> directories for various material setups. <hr/>
</li>
</ul>
<h2>Good to know... </h2>
<ul>
<li><p class="startli">The entries in the config file have to match their data type. For example, the ID tag has to be an integer value whereas the value for the cohesion has to be given in floating point notation: </p><pre class="fragment">  cohesion = 1000
</pre><p class="startli">will not work but </p><pre class="fragment">  cohesion = 1000.0   or   cohesion = 1.0e3
</pre><p class="startli">are valid entries. The libconfig specs indicate that a period is <em>always</em> mandatory for floats...</p>
</li>
<li>The code prints out all read material parameters if the verbose flag <code>-v</code> is used.</li>
<li>If values are ommitted, default values are assumed (see below). In most cases, these default values are not what you want. <hr/>
</li>
</ul>
<h2>Available settings </h2>
<p>Here, all settings are described, ordered mainly by material model and/or equation of state. For the keys in the following lists, the top level is assumed to be a specific material and subgroups within materials are denoted by dot syntax. For example, <em>ID</em> is on the top level of some material, and <em>eos.type</em> is the key <em>type</em> in the subgroup <em>eos</em>.</p>
<p>All units are SI, unless noted otherwise.</p>
<p>This list is currently not exhaustive.</p>
<p><b>Always mandatory</b> </p><pre class="fragment">    Key         Type    Default     Details
    _______________________________________

    ID          int     none        material ID, has to fit SPH particles' material-type
                                    in input file, IDs have to be 0, 1, 2,...

    eos.type    int     none        set equation of state for material, for a complete list see
                                    https://christophmschaefer.github.io/miluphcuda/pressure_8h.html
                                    or look directly into pressure.h
</pre><hr/>
<p><b>Always optional</b> </p><pre class="fragment">    Key             Type    Default                             Details
    ___________________________________________________________________

    name            str     none                                name of material, currently not
                                                                processed by miluphcuda

    density_floor   float   1% of bulk/reference density, or    minimum density (absolute value)
                            1% of matrix if porous, or          allowed for material
                            0. for gases
</pre><hr/>
<p><b>EoS: Tillotson</b></p>
<p>To use the Tillotson EoS for some material, set </p><pre class="fragment">    eos.type = 2
</pre><p>and the following parameters: </p><pre class="fragment">    Key                 Type    Default             Details
    _______________________________________________________

    eos.till_rho_0      float   0.                  reference density
    eos.till_A          float   0.
    eos.till_B          float   0.
    eos.till_E_0        float   0.
    eos.till_E_iv       float   0.
    eos.till_E_cv       float   0.
    eos.till_a          float   0.
    eos.till_b          float   0.
    eos.till_alpha      float   0.
    eos.till_beta       float   0.

    eos.rho_limit       float   0.9                 for expanded states with rho/rho_0 &lt; rho_limit
                                                    the pressure is set to zero (if e &lt; till_E_cv)

    eos.cs_limit        float   1% of approx.       lower limit for sound speed (in m/s),
                                bulk sound speed    default is 1% of sqrt(till_A/till_rho_0)
</pre><hr/>
<p><b>Plasticity model: von Mises</b></p>
<p>The von Mises model constitutes a single, constant yield strength.</p>
<p>You need to set <code>VON_MISES_PLASTICITY</code> in parameter.h (at compile time), and in the material config file: </p><pre class="fragment">    Key                 Type    Default
    ___________________________________

    eos.yield_stress    float   0.
</pre><hr/>
<p><b>Plasticity model: Collins</b></p>
<p>The Collins model is based on a pressure-dependent yield strength, which also depends on whether the material is intact or fragmented (<em>damaged</em>). See comments in parameter.h for more details.</p>
<p>You need to set <code>COLLINS_PLASTICITY</code> in parameter.h (at compile time), and in the material config file: </p><pre class="fragment">    Key                             Type    Default     Details
    ___________________________________________________________

    eos.cohesion                    float   0.
    eos.friction_angle              float   0.          in rad
    eos.cohesion_damaged            float   0.
    eos.friction_angle_damaged      float   0.          in rad
    eos.yield_stress                float   0.

    eos.melt_energy                 float   0.          to use this you need to additionally set
                                                        COLLINS_PLASTICITY_INCLUDE_MELT_ENERGY
                                                        in parameter.h (see comments there)
</pre><hr/>
<p><b>Plasticity model: Collins simple</b></p>
<p>This is a simplified version of the Collins model. See comments in parameter.h for more details.</p>
<p>You need to set <code>COLLINS_PLASTICITY_SIMPLE</code> in parameter.h (at compile time), and in the material config file: </p><pre class="fragment">    Key                     Type    Default     Details
    ___________________________________________________

    eos.cohesion            float   0.
    eos.friction_angle      float   0.          in rad
    eos.yield_stress        float   0.
</pre><hr/>
<p><b>Plasticity model: Drucker-Prager</b></p>
<p>This is a linear dependence of the yield strength on pressure.</p>
<p>You need to set <code>DRUCKER_PRAGER_PLASTICITY</code> in parameter.h (at compile time), and in the material config file: </p><pre class="fragment">    Key                     Type    Default     Details
    ___________________________________________________

    eos.cohesion            float   0.
    eos.friction_angle      float   0.          in rad

    eos.yield_stress        float   0.          optional upper limit for the yield strength,
                                                where you have to additionally set
                                                VON_MISES_PLASTICITY in parameter.h for this
</pre><hr/>
<p><b>Plasticity model: Mohr-Coulomb</b></p>
<p>This is a linear dependence of the yield strength on pressure.</p>
<p>You need to set <code>MOHR_COULOMB_PLASTICITY</code> in parameter.h (at compile time), and in the material config file: </p><pre class="fragment">    Key                     Type    Default     Details
    ___________________________________________________

    eos.cohesion            float   0.
    eos.friction_angle      float   0.          in rad

    eos.yield_stress        float   0.          optional upper limit for the yield strength,
                                                where you have to additionally set
                                                VON_MISES_PLASTICITY in parameter.h for this
</pre><hr/>
<p><b>Porosity model: P-alpha</b></p>
<p>The P-alpha porosity model can be used together with several EoS, which all have a distinct <em>eos.type</em> when used together with the P-alpha model:</p>
<ul>
<li><em>eos.type = 5</em> ... P-alpha + Tillotson EoS</li>
<li><em>eos.type = 6</em> ... P-alpha + Murnaghan EoS</li>
<li><em>eos.type = 13</em> ... P-alpha + ANEOS</li>
</ul>
<p>In addition to the parameters for the respective EoS, you need the following: </p><pre class="fragment">    Key                 Type    Default             Details
    _______________________________________________________

    ...
    ...
    ...

    eos.cs_porous       float   50% of approx.      sound speed in uncompacted material (in m/s),
                                bulk sound speed    the actual sound speed is interpolation between
                                                    this and the matrix cs, based on distention</pre> </div></div><!-- contents -->
<!-- start footer part -->
  <hr class="footer"/><address class="footer"><small>
    Miluphcuda  - How to set up the material config file for miluphcuda<br />
    Generated on Thu Feb 25 2021 07:05:12 by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.13
  </small></address>
</body>
</html>