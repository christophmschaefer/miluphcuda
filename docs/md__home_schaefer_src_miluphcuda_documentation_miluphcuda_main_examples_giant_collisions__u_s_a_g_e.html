<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>
	<meta name="generator" content="Doxygen 1.8.13"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Miluphcuda: Giant Collision examples for miluphcuda</title>
	<link href="tabs.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
	<link href="doxygen-custom.css" rel="stylesheet" type="text/css" />
	<!-- Add icon library -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Add font awesome icons -->
</head>
<body>
	<div id="banner">
		<div class="logo">
			<span class="subtitle">
				API Documentation for miluphcuda <!-- Giant Collision examples for miluphcuda -->
			</span>
			<!-- <span class="search">
				<input type="text" placeholder="Search" onkeydown="search(this,event);">
			</span> -->
		</div>
	<div class="icon-bar">
		<a href="https://cpt-milkyway.am10.uni-tuebingen.de/stoffel/miluphcuda/tree/master" class="fa fa-gitlab"></a>
		<a href="https://www.tat.physik.uni-tuebingen.de/~schaefer/#codes" class="fa fa-university"></a>
		<a href="https://github.com/christophmschaefer/miluphcuda" class="fa fa-github"></a>
		<a href="https://en.wikipedia.org/wiki/Smoothed-particle_hydrodynamics" class="fa fa-wikipedia-w"></a>
	</div>
	</div>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Giant Collision examples for miluphcuda </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Christoph Burger <a href="#" onclick="location.href='mai'+'lto:'+'chr'+'is'+'top'+'h.'+'bur'+'ge'+'r@u'+'ni'+'-tu'+'eb'+'ing'+'en'+'.de'; return false;">chris<span style="display: none;">.nosp@m.</span>toph<span style="display: none;">.nosp@m.</span>.burg<span style="display: none;">.nosp@m.</span>er@u<span style="display: none;">.nosp@m.</span>ni-tu<span style="display: none;">.nosp@m.</span>ebin<span style="display: none;">.nosp@m.</span>gen.d<span style="display: none;">.nosp@m.</span>e</a></p>
<p>last updated: 18/May/2021 </p><hr/>
<p>These examples represent a collision of a ~1/10 Moon-mass body with a ~Moon-mass target. Both bodies have a 30 mass% iron core and a 70 mass% rocky mantle. The collision velocity is two times the mutual escape velocity (at the moment of first contact). The impact angle is 45 deg.</p>
<p>You can choose between two material rheologies:</p>
<ul>
<li><em>hydro</em> &ndash; simple strengthless bodies</li>
<li><em>solid</em> &ndash; includes solid-body physics, the Grady-Kipp fragmentation model, and the Collins plasticity model</li>
</ul>
<p>The Tillotson EoS is applied to model the thermodynamic response.</p>
<p>The scenarios use ~60k SPH particles, with runtimes around 1h for <em>hydro</em>, and 2h for <em>solid</em> on most current GPUs (benchmarked on a GTX 970). </p><hr/>
<p><b>To run the examples:</b></p>
<ol type="1">
<li>Compile miluphcuda using the <code>parameter.h</code> file from the respective directory (hydro or solid). Don't forget to also adapt the miluphcuda Makefile to your system.</li>
<li>Unpack <code>initials/impact.0000.gz</code> and move it one dir level up.</li>
<li>Adapt the start script <code>run.sh</code> to your system (path to CUDA libs and to miluphcuda executable) and execute it.</li>
<li>Wait for the simulation to finish (75 output files). Output to stdout and stderr is written to <code>miluphcuda.output</code> and <code>miluphcuda.error</code>, respectively. <hr/>
</li>
</ol>
<p><b>Check/visualize the results</b></p>
<ul>
<li><p class="startli">You can visualize the simulation for example with <em>Paraview</em>. Find the latest release at <a href="https://www.paraview.org/">https://www.paraview.org/</a>.</p>
<p class="startli">First, enter the simulation directory and run </p><pre class="fragment">  utils/postprocessing/create_xdmf.py
</pre><p> which creates an xdmf file (<em>paraview.xdmf</em> by default). You can use the default cmd-line options, so no need to set anything explicitly. Note that the xdmf file contains only metadata, i.e., you still need the .h5 files it points to in the same directory. Then start Paraview and either</p><ul>
<li>directly open the created xdmf file and choose settings yourself</li>
<li>load the prepared Paraview state in <code>results/paraview.pvsm</code> (<em><a class="el" href="struct_file.html">File</a> -&gt; Load State</em>), and select the created <code>paraview.xdmf</code> file under <em>Choose <a class="el" href="struct_file.html">File</a> Names</em></li>
</ul>
</li>
<li>Compare your results (e.g., visualized with Paraview) to the animations in <code>results/</code>, which show the interior structure of the colliding bodies (cut views) for various quantities.</li>
<li>For the <em>solid</em> example, you can also visualize the workings of the Collins plasticity model by running <code>results/plot_plastic_yielding.sh</code>. This produces plots for shear stress vs. pressure, including the respective yield limit curves. <hr/>
</li>
</ul>
<p><b>Where to go from here?</b></p>
<p>You can easily build on those examples for setting up your own simulations. It is straight-forward to run different scenarios, with varying masses, collision parameters, and even material compositions, and pre-collision rotation. We use an external tool for creating the required initial conditions, which is easy to use. Just drop me an e-mail if you are interested.</p>
<p>Take a look at the timestep statistics at the very bottom of <em>miluphcuda.output</em>. If you are not satisfied you may try to adjust the integrator accuracy on the cmd-line and/or the compile-time settings for the integrator in <em><a class="el" href="rk2adaptive_8h.html">rk2adaptive.h</a></em>.</p>
<p>You can also run further postprocessing on the results, e.g., to find all collision fragments and gravitationally bound aggregates of those. The necessary tools are included in </p><pre class="fragment">    miluphcuda/utils/postprocessing/fast_identify_fragments_and_calc_aggregates/
</pre><p>Check the QuickStart guide there for more details.</p>
<p>Enjoy! </p>
</div></div><!-- contents -->
<!-- start footer part -->
  <hr class="footer"/><address class="footer"><small>
    Miluphcuda  - Giant Collision examples for miluphcuda<br />
    Generated on Tue Jun 22 2021 07:05:16 by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.13
  </small></address>
</body>
</html>